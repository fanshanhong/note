---

title: 二叉树

date: 2018-05-09 

categories: 

   - 数据结构

tags: 

   - 数据结构

description: ​

---
<!-- TOC -->

- [二叉树](#二叉树)
    - [二叉树的特点](#二叉树的特点)
    - [满二叉树](#满二叉树)
    - [完全二叉树](#完全二叉树)
    - [二叉查找树（Binary Search Tree - BST，又称二叉排序树、二叉搜索树）](#二叉查找树binary-search-tree---bst又称二叉排序树二叉搜索树)
    - [平衡二叉搜索树 (Balanced binary search trees,又称AVL树、平衡二叉查找树)](#平衡二叉搜索树-balanced-binary-search-trees又称avl树平衡二叉查找树)
        - [AVL树的特点](#avl树的特点)
        - [为什么选择AVL树而不是BST？](#为什么选择avl树而不是bst)
        - [节点插入、旋转](#节点插入旋转)
            - [LL - 插入节点是失衡节点u左子节点ul上的左子树节点](#ll---插入节点是失衡节点u左子节点ul上的左子树节点)
            - [LR - 插入节点是失衡节点u左子节点ul上的右子树节点](#lr---插入节点是失衡节点u左子节点ul上的右子树节点)
            - [RR - 插入节点是失衡节点u右子节点ur上的右子树节点](#rr---插入节点是失衡节点u右子节点ur上的右子树节点)
            - [RL - 插入节点是失衡节点u右子节点ur上的左子树节点](#rl---插入节点是失衡节点u右子节点ur上的左子树节点)

<!-- /TOC -->


from:https://zhuanlan.zhihu.com/p/152599308
from:https://www.jianshu.com/p/e136ec79235c


# 二叉树
二叉树是每个节点最多有两个子树的树结构，左侧子树节点称为“左子树”（left subtree），右侧子树节点称为“右子树”（right subtree）。每个节点最多有2个子节点的树（即每个定点的度小于3）。


## 二叉树的特点

* 至少有一个节点(根节点)
* 每个节点最多有两颗子树，即每个节点的度小于3。
* 左子树和右子树是有顺序的，次序不能任意颠倒。
* 即使树中某节点只有一棵子树，也要区分它是左子树还是右子树。


## 满二叉树
除了叶子节点外每一个节点都有两个子节点，且所有叶子节点都在二叉树的同一高度上。

![](https://pic1.zhimg.com/80/v2-6a84996e1858ebce3715a75315aaf84c_720w.jpg)



## 完全二叉树
如果二叉树中除去底层节点后为满二叉树，且底层节点依次从左到右分布，则此二叉树被称为完全二叉树。

![](https://pic4.zhimg.com/80/v2-2244b5df7f443fed41565056e03bb653_720w.jpg)


## 二叉查找树（Binary Search Tree - BST，又称二叉排序树、二叉搜索树）
二叉查找树根节点的值大于其左子树中任意一个节点的值，小于其右子树中任意一节点的值，且该规则适用于树中的每一个节点。

![](https://pic4.zhimg.com/80/v2-a819c29a26e2fa6d2db263b393db90c7_720w.jpg)



二叉查找树的查询效率介于O(log n)~O(n)之间，理想的排序情况下查询效率为O(log n),极端情况下BST就是一个链表结构，此时元素查找的效率相等于链表查询O(n)。

![](https://pic4.zhimg.com/v2-7c8335186ed94c9cc00fe3837e140c4b_b.webp)


二叉查找树需要注意的是删除节点操作时的不同情况，删除节点根据节点位置会有以下三种情况：

* 删除节点的度为0，则直接删除
* 删除节点的度为1，则该子节点替代删除节点
* 删除节点的度为2，则从左子树中寻找值最大的节点替代删除节点。对树结构改动最少、节点值最进行删除节点值的必然是左子树中的最大叶子节点值与右子树中的最小叶子节点值



由上可以看出，二叉查找树(BST)无法根据节点的结构改变(添加或删除)动态平衡  树的排序结构，也因此对某些操作的效率造成一定的影响，而AVL树在BST的结构特点基础上添加了旋转平衡功能解决了这些问题。


## 平衡二叉搜索树 (Balanced binary search trees,又称AVL树、平衡二叉查找树)

平衡二叉搜索树(AVL树)是最早被发明的自平衡二叉搜索树，树中任一节点的两个子树的高度差最大为1，所以它也被称为高度平衡树，其查找、插入和删除在平均和最坏情况下的时间复杂度都是O(log n)。

### AVL树的特点

* 具有二叉查找树的特点(左子树任一节点小于父节点，右子树任一节点大于父节点)，任何一个节点的左子树与右子树都是平衡二叉树

* 任一节点的左右子树高度差小于等于1，即平衡因子为范围为[-1,1] 


### 为什么选择AVL树而不是BST？

大多数BST操作(如搜索、最大值、最小值、插入、删除等)的时间复杂度为O(h)，其中h是BST的高度。对于极端情况下的二叉树，这些操作的成本可能变为O(n)。如果确保每次插入和删除后树的高度都保持O(log n)，则可以保证所有这些操作的效率都是O(log n)


### 节点插入、旋转

AVL树插入节点的如下：

1. 根据BST插入逻辑将新节点插入树中

2. 从新节点往上遍历检查每个节点的平衡因子，若发现有节点平衡因子不在[-1,1]范围内(即失衡节点u)，则通过旋转重新平衡以u为根的子树

旋转的方式：

1. 左旋转：用于平衡RR情况，对失衡节点u(unbalanced)及子树进行左旋
2. 右旋转：用于平衡LL情况，对失衡节点u及子树进行右旋
3. 左右旋转：用于平衡LR情况，对失衡节点失衡u的左子节点ul左旋，再对失衡节点u右旋
4. 右左旋转：用于平衡情况，对失衡节点u失衡方向的右子节点ur右旋，再对失衡节点u左旋


#### LL - 插入节点是失衡节点u左子节点ul上的左子树节点
![](https://pic1.zhimg.com/80/v2-dcd56ccaf1969107f404a65039f2df4c_720w.jpg)


#### LR - 插入节点是失衡节点u左子节点ul上的右子树节点
![](https://pic1.zhimg.com/80/v2-5434554248873783d23bee77918e8958_720w.jpg))

#### RR - 插入节点是失衡节点u右子节点ur上的右子树节点
![](https://pic3.zhimg.com/80/v2-7af3a8ecc2618d612d429edb500e2656_720w.jpg)

#### RL - 插入节点是失衡节点u右子节点ur上的左子树节点
![](https://pic3.zhimg.com/80/v2-2bdd9e3bf7c91add7e02a696d04e1cde_720w.jpg)


规律总结：

* 失衡节点到其最底部叶子节点的高度不会超过4
* 失衡节点哪里不平衡就会往哪里的反向旋转
* 添加的节点到失衡节点的路径如果是一条直线(即LL或RR)，则只需对失衡节点u进行反向旋转
* 添加的节点到失衡节点的路径如果是一条曲线(即LR或RL)，则需先对该路径上失衡节点u的子节点(ul/ur)进行旋转，再对失衡节点进行旋转
* 失衡节点u旋转后会成为它原来子树(ul/ur)中的一颗子树，如果u旋转时替代u的子树已有u旋转方向上的子树，那么该子树会断裂成为u的子树(如下LR的u右旋，uls已有右子树T2，故会T2断裂以BST的规则重新插入成为u的子树)

记得每次都是相反方向旋转